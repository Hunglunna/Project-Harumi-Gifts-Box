<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <title>Tạo thông điệp</title>
    <link rel="stylesheet" href="/static/css/app.css" />
    <style>
      body { padding: 2rem; font-family: sans-serif; max-width: 600px; margin: auto; }
      input, textarea { width: 100%; margin-bottom: 1rem; padding: 0.5rem; }
    </style>
  </head>
  <body>
    <h1>🔧 Tạo thông điệp yêu thương</h1>

    <label>Tiêu đề trang:</label>
    <input id="title" placeholder="VD: Gửi Tuyết yêu dấu 💌" />

    <label>Tên người gửi:</label>
    <input id="name" placeholder="VD: Hưng cute 😘" />

    <label>Màu chữ (mã hex):</label>
    <input id="color" value="#ff0019" />

    <label>Nhạc nền (link mp3):</label>
    <input id="music" value="//thanhdieu.com/music.mp3" />

    <label>Các thông điệp (mỗi dòng 1 câu):</label>
    <textarea id="messages" rows="6">Hưng lúc nào cũng nhắc đến Tuyết 🥰
Hưng yêu Tuyết hơn cả cơm mẹ nấu 💖</textarea>

    <button onclick="generateLink()">Tạo link 💌</button>

    <p id="result"></p>
<script src="https://cdn.jsdelivr.net/npm/lz-string/libs/lz-string.min.js"></script>

    <script>
      function generateLink() {
        const data = {
          title: document.getElementById("title").value || "hunglunna",
          name: document.getElementById("name").value || "hunglunna",
          color: document.getElementById("color").value || "#ff0019",
          music: document.getElementById("music").value || "//thanhdieu.com/music.mp3",
          messages: document.getElementById("messages").value.trim().split("\n")
        };

        const encoded = btoa(encodeURIComponent(JSON.stringify(data)));
        const url = `/message.html?data=${encoded}`;

        document.getElementById("result").innerHTML = `
          ✅ Link đã tạo: <a href="${url}" target="_blank">${url}</a>
        `;
      }
    </script>
  </body>
</html>

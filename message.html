<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title id="page-title">hunglunna</title>
    <link href="https://fonts.bunny.net/css?family=instrument-sans:400,500,600" rel="stylesheet"/>
    <link rel="stylesheet" href="/static/css/app.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
  </head>
  <body class="font-sans antialiased">
    <div id="app"></div>

    <script type="module">
      // Lấy đoạn mã từ URL sau "/m/"
      const encoded = location.pathname.split("/m/")[1];

      if (!encoded) {
        document.body.innerHTML = "<h1>Không tìm thấy nội dung!</h1>";
        throw new Error("Missing encoded data");
      }

      // Giải mã dữ liệu
      const jsonStr = LZString.decompressFromEncodedURIComponent(encoded);
      const data = JSON.parse(jsonStr);

      // Gán dữ liệu vào trang
      document.title = data.props.name || "hunglunna";

      const div = document.createElement("div");
      div.setAttribute("id", "app");
      div.setAttribute("data-page", JSON.stringify(data));
      document.body.innerHTML = "";
      document.body.appendChild(div);

      // Gọi lại script chính
      import("/static/js/app.js");
      import("/static/js/home.js");
    </script>
  </body>
</html>
